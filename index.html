<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>PEC 2 ‚Äî T√©cnicas de Visualizaci√≥n de Datos | S√≤nia Ribera Coma</title>
  <meta name="description" content="Pr√°ctica PEC 2 ‚Äî T√©cnicas de Visualizaci√≥n de Datos (UOC). Visualizaciones interactivas con Plotly y Bokeh realizadas por S√≤nia Ribera Coma.">
  <style>
    body {
      font-family: Arial, system-ui;
      max-width: 950px;
      margin: auto;
      padding: 2rem;
      background: #ffffff;
      color: #111827;
      line-height: 1.6;
    }
    h1, h2 {
      color: #1f2937;
    }
    h1 {
      font-size: 1.8rem;
      margin-bottom: 1.2rem;
      border-bottom: 3px solid #e5e7eb;
      padding-bottom: 0.5rem;
    }
    h2 {
      font-size: 1.3rem;
      margin-top: 2rem;
      margin-bottom: 0.5rem;
    }
    p { margin: 0.5rem 0; text-align: justify; }
    a { color: #2563eb; text-decoration: none; }
    a:hover { text-decoration: underline; }
    ul { margin: 0.5rem 0 1rem 1.5rem; }
  </style>
</head>
<body>
  <h1>PEC 2 ‚Äî T√©cnicas de Visualizaci√≥n de Datos</h1>
  <p class="meta">
    <strong>Autora:</strong> S√≤nia Ribera Coma<br>
    <strong>Asignatura:</strong> Visualizaci√≥n de datos (M√°ster Ciencia de Datos de la UOC)<br>
    <strong>Curso:</strong> 2025‚Äì2026
  </p>
  <p>Esta pr√°ctica presenta tres visualizaciones interactivas creadas con las librer√≠as <strong>Plotly</strong> y <strong>Bokeh</strong> a partir del conjunto de datos abierto <em>Lifestyle and Wellbeing Data</em> (Kaggle, 2023).</p>

  <!-- üåü BLOQUE MODERNO DE NAVEGACI√ìN Y VISUALIZACI√ìN -->
  <main id="contenido" role="main">
    <div class="container">
      <section aria-labelledby="intro">
        <p>Explora las visualizaciones usando las pesta√±as o las flechas de navegaci√≥n. Cada gr√°fico muestra un aspecto distinto del bienestar y los h√°bitos cotidianos.</p>
      </section>

      <nav class="tabs" role="tablist" aria-label="Visualizaciones">
        <button role="tab" id="tab-stacked" aria-controls="panel" aria-selected="true" data-src="stacked_bar.html" data-title="Grupo I ‚Äî Stacked Bar Graph (Barras Apiladas)">Barras apiladas</button>
        <button role="tab" id="tab-boxplot" aria-controls="panel" aria-selected="false" data-src="boxplot.html" data-title="Grupo II ‚Äî Box Plot (Diagrama de Caja)">Box plot</button>
        <button role="tab" id="tab-hexbin"  aria-controls="panel" aria-selected="false" data-src="hexbin_bokeh.html" data-title="Grupo III ‚Äî Hexbin (Agregaci√≥n hexagonal)">Hexbin</button>
        <div class="spacer"></div>
        <div class="nav-arrows" aria-hidden="false">
          <button id="prev" aria-label="Anterior">‚¨ÖÔ∏è</button>
          <button id="next" aria-label="Siguiente">‚û°Ô∏è</button>
        </div>
      </nav>

      <h2 id="chart-title" class="vis-title">Grupo I ‚Äî Stacked Bar Graph (Barras Apiladas)</h2>

      <div id="skeleton" class="skeleton" aria-hidden="true"></div>

      <iframe id="frame" title="Visualizaci√≥n interactiva" src="stacked_bar.html" loading="lazy"></iframe>

      <p class="note">Puedes usar las flechas del teclado (‚Üê ‚Üí) o deslizar en m√≥vil para cambiar de visualizaci√≥n.</p>
    </div>
  </main>

  <style>
    .container{max-width:980px;margin:0 auto;padding:1rem 1.25rem;}
    .tabs{
      position:sticky; top:0; z-index:20; display:flex; gap:.5rem; align-items:center;
      background:#fff; padding:.6rem .6rem; border:1px solid #e5e7eb; border-radius:14px;
      box-shadow:0 4px 16px rgba(0,0,0,.04); margin:.75rem 0 1rem 0;
    }
    .tabs button[role="tab"]{
      appearance:none; border:2px solid transparent; background:#f3f4f6; color:#111827;
      padding:.55rem .9rem; border-radius:12px; font-weight:600; cursor:pointer;
    }
    .tabs button[aria-selected="true"]{ background:#1f2937; color:#fff; }
    .tabs button:focus-visible{ outline:3px solid #2563eb; outline-offset:2px; }
    .spacer{flex:1}
    .nav-arrows button{
      border:none; background:#1f2937; color:#fff; font-weight:700; border-radius:10px;
      padding:.45rem .7rem; cursor:pointer;
    }
    .nav-arrows button:disabled{ background:#9ca3af; cursor:not-allowed; }
    .vis-title{margin:.6rem 0 1rem 0; border-left:4px solid #1f2937; padding-left:.6rem;}
    #frame{
      width:100%; border:1px solid #e5e7eb; border-radius:14px; background:#fff;
      box-shadow:0 6px 24px rgba(0,0,0,.05);
      height:68vh;
    }
    .skeleton{
      display:none; width:100%; height:68vh; border-radius:14px;
      background:linear-gradient(90deg,#f4f4f5 25%,#eaeaea 37%,#f4f4f5 63%);
      background-size:400% 100%; animation:shine 1.2s infinite ease-out;
      border:1px solid #e5e7eb;
    }
    @keyframes shine{0%{background-position:100% 0}100%{background-position:0 0}}
    .note{color:#6b7280; font-size:.95rem; margin:.6rem 0 0}
    @media (prefers-reduced-motion:reduce){ .skeleton{animation:none} }
  </style>

  <script>
    const routes = {
      '#stacked': {tab:'tab-stacked'},
      '#boxplot': {tab:'tab-boxplot'},
      '#hexbin' : {tab:'tab-hexbin'}
    };
    const order = ['#stacked','#boxplot','#hexbin'];
    const tabs  = [...document.querySelectorAll('[role="tab"]')];
    const frame = document.getElementById('frame');
    const title = document.getElementById('chart-title');
    const skeleton = document.getElementById('skeleton');
    const prevBtn = document.getElementById('prev');
    const nextBtn = document.getElementById('next');

    function setActiveByHash(hash, push=true){
      if(!routes[hash]) hash = '#stacked';
      const tabId = routes[hash].tab;
      tabs.forEach(b => b.setAttribute('aria-selected', String(b.id===tabId)));
      const active = document.getElementById(tabId);
      title.textContent = active.dataset.title;
      skeleton.style.display = 'block';
      frame.style.visibility = 'hidden';
      frame.src = active.dataset.src;
      if(push) history.pushState({hash}, '', hash);
      updateArrows(hash);
    }

    function updateArrows(hash){
      const idx = order.indexOf(hash);
      prevBtn.disabled = idx<=0;
      nextBtn.disabled = idx>=order.length-1;
    }

    frame.addEventListener('load', () => {
      skeleton.style.display = 'none';
      frame.style.visibility = 'visible';
    });

    tabs.forEach(b => b.addEventListener('click', () => {
      const hash = b.id==='tab-stacked' ? '#stacked' : b.id==='tab-boxplot' ? '#boxplot' : '#hexbin';
      setActiveByHash(hash);
    }));

    window.addEventListener('keydown', e=>{
      const hash = location.hash || '#stacked';
      let idx = order.indexOf(hash);
      if(e.key==='ArrowRight' && idx<order.length-1){ setActiveByHash(order[++idx]); }
      if(e.key==='ArrowLeft'  && idx>0){ setActiveByHash(order[--idx]); }
    });

    let sx=null;
    window.addEventListener('touchstart', e=>{ sx = e.changedTouches[0].screenX; });
    window.addEventListener('touchend', e=>{
      if(sx===null) return;
      const dx = e.changedTouches[0].screenX - sx;
      sx=null;
      const hash = location.hash || '#stacked';
      let idx = order.indexOf(hash);
      if(dx<-40 && idx<order.length-1){ setActiveByHash(order[++idx]); }
      if(dx>40 && idx>0){ setActiveByHash(order[--idx]); }
    });

    prevBtn.addEventListener('click', ()=>{
      const hash = location.hash || '#stacked';
      let i = order.indexOf(hash);
      if(i>0) setActiveByHash(order[--i]);
    });
    nextBtn.addEventListener('click', ()=>{
      const hash = location.hash || '#stacked';
      let i = order.indexOf(hash);
      if(i<order.length-1) setActiveByHash(order[++i]);
    });

    function resizeFrame(){
      frame.style.height = Math.max(420, Math.round(window.innerHeight*0.68)) + 'px';
    }
    window.addEventListener('resize', resizeFrame);
    resizeFrame();

    window.addEventListener('popstate', ()=> setActiveByHash(location.hash || '#stacked', false));
    setActiveByHash(location.hash || '#stacked', false);
  </script>
</body>
</html>
